<section class="docs-content">
  <header>
    <nav class="tabs">
      <ol>
        <li<% if api.version == 1 %> class="active"<% end %>>
          <a href="/docs/v1">V1</a>
        </li>
        <li<% if api.version == 2 %> class="active"<% end %>>
          <a href="/docs/v2">V2</a>
        </li>
      </ol>
    </nav>
    <nav class="sections">
      <h1>
        API V<%= api.version %> Reference<br>
        <em>API Version <%= api.version %> <span>&mdash;</span> <%= api.released %></em>
      </h1>
      <ol class="manuals">
        <% data["v#{api.version}"].manuals.each do |section| %>
          <% next unless section.anchor %>
          <li>
            <a href="/docs/v1#<%= section.anchor %>">
              <%= section.title %>
            </a>
          </li>
        <% end %>
      </ol>
      <h1>HTTP Endpoints</h1>
        <% data["v#{api.version}"].resources.each do |resource| %>
          <h2>
            <a href="/docs/v<%= api.version %>/<%= resource.slug %>">
              <%= resource.name %>
            </a>
          </h2>
          <ol class="endpoints">
            <% resource.endpoints.each do |endpoint| %>
              <li>
                <a href="/docs/v<%= api.version %>/<%= resource.slug %>#<%= endpoint.anchor %>">
                  <%= endpoint.route %>
                </a>
              </li>
            <% end %>
          </ol>
        <% end %>
    </nav>
  </header>

  <article>
    <header>
      <h1>LCBO API Version <%= api.version %></h1>
    </header>

    <div class="document">
      <% if defined? api_resource %>
        <% content_for :title, api_resource.title %>
        <%= partial 'docs/resource', locals: { resource: api_resource } %>
      <% else %>
        <% content_for :title, "LCBO API V#{api.version} Reference" %>
        <% api.manuals.each do |section| %>
          <% if section.anchor %>
            <span id="<%= section.anchor %>"></span>
          <% end %>
          <%= markdown section.body %>
        <% end %>
      <% end %>
    </div>
  </article>
</section>
