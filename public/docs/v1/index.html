<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="A fast, cloud-based API for LCBO store, product, and inventory data.">
    <title>LCBO API V1 Reference</title>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Roboto:500,900,400italic,400,300,300italic,700,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400' rel='stylesheet' type='text/css'>
    <link href="/assets/css/lcboapi.css" rel="stylesheet" type="text/css" />
    <script src="/assets/js/lcboapi.js" type="text/javascript"></script>
  </head>

  <body class="lcboapi docs docs_v1 docs_v1_index">
    <header>
      <h1 class="lcboapi-wordmark">
        <a href="/">
          <span>LCBO API</span>
        </a>
      </h1>
      <nav>
        <ol>
          <li>
            <a class="about" href="/about">
              Story
            </a>
          </li>
          <li>
            <a class="docs" href="/docs/v1">
              Reference
            </a>
          </li>
          <li>
            <a class="news" href="/news">
              News
            </a>
          </li>
          <li>
            <a href="/log-in">
              Log In
            </a>
          </li>
          <li class="sign-up">
            <a href="/sign-up" class="button">
              Get A Key
            </a>
          </li>
        </ol>
      </nav>
    </header>

    <main>
      <section class="docs-content">
  <header>
    <nav class="tabs">
      <ol>
        <li class="active">
          <a href="/docs/v1">V1</a>
        </li>
        <li>
          <a href="/docs/v2">V2</a>
        </li>
      </ol>
    </nav>
    <nav class="sections">
      <h1>
        API V1 Reference<br>
        <em>API Version 1 <span>&mdash;</span> April 2009</em>
      </h1>
      <ol class="manuals">
          <li>
            <a href="/docs/v1#overview">
              Overview
            </a>
          </li>
          <li>
            <a href="/docs/v1#responses">
              Responses
            </a>
          </li>
          <li>
            <a href="/docs/v1#authentication">
              Authentication
            </a>
          </li>
          <li>
            <a href="/docs/v1#jsonp-and-cors">
              JSONP &amp; CORS
            </a>
          </li>
          <li>
            <a href="/docs/v1#pagination">
              Pagination
            </a>
          </li>
          <li>
            <a href="/docs/v1#csv">
              CSV Data
            </a>
          </li>
          <li>
            <a href="/docs/v1#errors">
              Errors
            </a>
          </li>
      </ol>
      <h1>HTTP Endpoints</h1>
          <h2>
            <a href="/docs/v1/stores">
              Stores
            </a>
          </h2>
          <ol class="endpoints">
              <li>
                <a href="/docs/v1/stores#many">
                  /stores
                </a>
              </li>
              <li>
                <a href="/docs/v1/stores#one">
                  /stores/:id
                </a>
              </li>
          </ol>
    </nav>
  </header>

  <article>
    <header>
      <h1>LCBO API Version 1</h1>
    </header>

    <div class="document">
          <p class="warning">
  Unlimited, anonymous API access will end on <b>March 1<sup>st</sup>,
  2015</b>. Starting on that date Access Keys will be required for
  unlimited access to LCBO API V1. <a href="/news/whats-next-for-lcbo-api">Read more</a>
</p>

<h1>Welcome to LCBO API</h1>

<p>This is the documentation for Version 1 (V1) of LCBO API. It was originally
released <strong>April 2009</strong>.</p>

            <span id="overview"></span>
          <h1>Overview</h1>

<ul>
<li><a href="#responses">Responses &amp; Formats</a></li>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#jsonp-and-cors">JSONP &amp; CORS</a></li>
<li><a href="#https">HTTPS</a></li>
</ul>

            <span id="responses"></span>
          <h1>Responses</h1>

<p>The default response format for the API is JSON <code>application/json</code>. This means that you don&#39;t
need to specify JSON in an <code>Accept</code> header or as an extension (.json) if
that is the format you intend to request. Every response from the API is
wrapped in a &quot;container&quot; that in its most basic form looks like this:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This allows the API to return meta information along with the data you are
requesting. For example, in the case of a
<a href="/docs/stores-with-product">Stores with Product</a> request the product object
is returned with list of stores so that your application does not need to
perform an additional request to obtain store information.</p>

            <span id="authentication"></span>
          <h1>Authentication</h1>

<p><strong>LCBO API V1 does not require authentication for access.</strong> Starting on
<b>March 1<sup>st</sup>, 2015</b>, LCBO API V1 <strong>will</strong> require Access Keys
for <strong>unlimited</strong> use. New features in LCBO API V1 such as HTTPS and CORS
<strong>require authentication</strong> with an Access Key.</p>

<p class="info">
  You can provision an unlimited number of Access Keys for free by
  <a href="/sign-up">creating</a> an LCBO API account.
</p>

<p>There are three different types of access keys, they have specific
use-cases in mind:</p>

<table class="auth-keys-table">
  <thead>
    <tr>
      <th width="22%">Key Type</th>
      <th width="78%">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td width="22%">
        <b>Web Browser</b>
      </td>
      <td width="78%">
        Use when LCBO API is accessed from a web browser through
        <code>XMLHttpRequest</code> (Ajax/XHR)
        using CORS or through dynamically inserted <code>&lt;script&gt;</code>
        tags (JSONP). These keys are rate-limited per client IP address and
        are paired to a domain. For example, a Web Browser Access Key with
        the domain <b>momsandhops.ca</b> would fail to work if used
        on a page served from <b>thebeerstore.ca</b>.
      </td>
    </tr>
    <tr>
      <td width="22%">
        <b>Native Client</b>
      </td>
      <td width="78%">
        In native mobile and desktop applications, these keys are rate-limited per
        client but do not support CORS or JSONP.
      </td>
    </tr>
    <tr>
      <td width="22%">
        <b>Private</b>
      </td>
      <td width="78%">
        When LCBO API is accessed from a web server or private script, these keys are not rate-limited, and they do not support CORS or JSONP.
      </td>
    </tr>
  </tbody>
</table>

            <span id="jsonp-and-cors"></span>
          <h1>JSONP &amp; CORS</h1>

<p>LCBO API provides support for cross-origin requests so that you can access
LCBO API data directly from a web page. Classically, due to the
Single Origin Policy there were only two ways to do this, either by
proxying all requests through an endpoint on your origin server. For
example, by providing an endpoint like this:</p>
<pre class="highlight plaintext"><code>mysite.com/lcboapi/*
</code></pre>

<p>That would then proxy anything after lcboapi/ to lcboapi.com:</p>
<pre class="highlight plaintext"><code>mysite.com/lcboapi/products -&gt; lcboapi.com/products
</code></pre>

<p>The proxying approach is actually pretty good, the browser allows these
requests because they happen on the same domain that the page was served
from. It does, however, require infrastructure to work, and is pretty
redundant. This leads us to the first (and until recently, only) way to
request data from cross-origin servers, JSONP.</p>

<h2>JSONP</h2>

<p>JSONP stands for JSON with Padding and works by appending a <code>&lt;script&gt;</code> tag
to the page which points to an LCBO API endpoint with a query parameter
named <code>callback</code>. When LCBO API sees this parameter, it wraps the response
payload in a JavaScript function call with the name provided
in the <code>callback</code> parameter.</p>

<p class="orly">
  If it feels like a hack&hellip; that's because it is. JSONP only
  works because the client (you) and the server (LCBO API) agree
  to exploit the browser together.
</p>

<p>To use JSONP with LCBO API, simply add a <code>callback</code> parameter
to LCBO API URLs.</p>

<p>When using JSONP LCBO API also sets <code>Content-Type</code> to
<code>application/javascript</code> since the response is now, actually, executable
JavaScript.</p>

<p>For example, this URL <code>lcboapi.com/products?callback=loadJSON</code> would return
a response that looks like:</p>
<pre class="highlight javascript"><code><span class="nx">loadJSON</span><span class="p">({</span>
  <span class="na">status</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="na">message</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="na">result</span><span class="p">:</span> <span class="p">[</span> <span class="p">...</span> <span class="p">]</span>
<span class="p">});</span>
</code></pre>

<p>It&#39;s important to note that most popular JavaScript libraries have built-in
support for JSONP. For example, the following jQuery can be used to perform
a JSONP request against LCBO API:</p>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'http://lcboapi.com/products/371906'</span><span class="p">,</span>
  <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<h2>CORS</h2>

<p>Cross Origin Resource Sharing (CORS) is a robust W3C specification for
allowing browsers to access resources from different domains. LCBO API uses
it to give access to web browser JavaScript applications.</p>

<p>If you need to support outdated bowsers,
<a href="http://caniuse.com/#feat=cors">specifically IE 6 and 7</a>, you&#39;ll either have
to use a proxy or JSONP. Hilariously, with the advent of async script tags
<code>&lt;script async&gt;</code> JSONP can be about as effective in modern browsers as
using XMLHttpRequest with CORS. If you have to support older browsers that
don&#39;t understand CORS, there is no shame in using JSONP.</p>

<p>If you don&#39;t have to support IE 6 and 7, <em>welcome to the future!</em> To use CORS
with LCBO API you need to provide an Web Browser Access Key with your
requests. You&#39;ll need an LCBO API account to create Access Keys,
<a href="/sign-up">sign up</a> for one and get started. You can also
<a href="#authentication">read more</a> about LCBO API authentication.</p>

<p>Once you have a Web Browser Access Key, using LCBO API with CORS from jQuery
is as simple as:</p>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'http://lcboapi.com/products/346197'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Token YOUR_ACCESS_KEY'</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

            <span id="pagination"></span>
          <h1>Pagination</h1>

<p>When the API returns collections of items (stores, products, or inventories)
it will paginate the results. You can control the number of items per page
through the <code>per_page</code> parameter.</p>

<p>A typical pager object looks like this:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"records_per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_record_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">608</span><span class="p">,</span><span class="w">
  </span><span class="s2">"current_page_record_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_first_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_final_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"current_page_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/stores?page=5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="s2">"next_page_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/stores?page=6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"previous_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="s2">"previous_page_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/stores?page=4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"final_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="w">
  </span><span class="s2">"final_page_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/stores?page=31"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>It contains all of the information you need (and more) to navigate through
the pages in the result set.</p>

            <span id="csv"></span>
          <h1>CSV and TSV Responses</h1>

<p>Many resources can be returned as CSV (comma separated values) or TSV
(tab separated values). These results can then be easily imported into
spreadsheet software such as Apple Numbers or Microsoft Excel. To return
a resource in CSV or TSV format simply append the <code>.csv</code> or <code>.tsv</code>
extension to the resource URI:</p>

<pre><code>/products<em>.csv</em>?order=price_in_cents.desc
</code></pre>

            <span id="errors"></span>
          <h1>Errors</h1>

<p>When an error occurs the response will look something like this:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bad_query_error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A value supplied for the order parameter (id.desk) is not valid. It contains an invalid sort order (desk) for (id) try using: id.desc or id.asc instead."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Error messages are always as descriptive as possible and they fall into one
of the below categories:</p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>no_results_error</code></td>
<td>The geocoder returned no geometry for the geo query.</td>
</tr>
<tr>
<td><code>over_limit_error</code></td>
<td>The geocoder has reached its daily limit of requests.</td>
</tr>
<tr>
<td><code>geocoder_error</code></td>
<td>The geocoder can&#39;t geocode the query it was provided.</td>
</tr>
<tr>
<td><code>not_found_error</code></td>
<td>A resource was not found (404)</td>
</tr>
<tr>
<td><code>bad_query_error</code></td>
<td>One (or more) of the supplied query parameters is wrong.</td>
</tr>
<tr>
<td><code>jsonp_error</code></td>
<td>Supplied callback is not a valid format, or JSONP is not being used correctly.</td>
</tr>
<tr>
<td><code>unauthorized</code></td>
<td>The feature you&#39;re trying to use requires an Access Key</td>
</tr>
</tbody></table>

    </div>
  </article>
</section>

    </main>

    <footer>
      <nav>
        <ol>
          <li>
            <a href="mailto:info@lcboapi.com">
              Contact
            </a>
          </li>
          <li>
            <a href="/tos">
              Legal
            </a>
          </li>
          <li>
            <a href="/privacy">
              Privacy
            </a>
          </li>
          <li>
            <a href="/credits">
              Credits
            </a>
          </li>
        </ol>
      </nav>

      <p class="disclaimer">
        <span>
          LCBO API is not funded or endorsed by the LCBO
        </span>
      </p>

      <p class="copyright">
        &copy; 2009&ndash;2014
        <a href="http://heycarsten.com">Carsten Nielsen</a>
      </p>
    </footer>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-8617929-2', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
